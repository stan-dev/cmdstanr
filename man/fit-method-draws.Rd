% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/fit.R
\name{fit-method-draws}
\alias{fit-method-draws}
\alias{draws}
\title{Extract posterior draws}
\description{
Extract posterior draws after MCMC or approximate posterior
draws after variational approximation using formats provided by the
\pkg{posterior} package.

The variables include the \code{parameters}, \verb{transformed parameters}, and
\verb{generated quantities} from the Stan program as well as \code{lp__}, the total
log probability (\code{target}) accumulated in the \code{model} block.
}
\section{Usage}{
\preformatted{$draws(variables = NULL, inc_warmup = FALSE, ...)
}
}

\section{Arguments}{

\itemize{
\item \code{variables}: (character vector) The variables (parameters and generated
quantities) to read in. If \code{NULL} (the default) then the draws of all
variables are included.
\item \code{inc_warmup}: (logical) For MCMC only, should warmup draws be included?
Defaults to \code{FALSE}.
\item \code{...}: Arguments passed on to
\code{\link[posterior:draws_array]{posterior::as_draws_array()}}.
}
}

\section{Value}{

\itemize{
\item For MCMC, a 3-D \code{\link[posterior:draws_array]{draws_array}} object (iteration x
chain x variable).
\item For variational inference, a 2-D \code{\link[posterior:draws_matrix]{draws_matrix}}
object (draw x variable). An additional variable \code{lp_approx__} is also
included, which is the log density of the variational approximation to the
posterior evaluated at each of the draws.
\item For optimization, a 1-row \code{\link[posterior:draws_matrix]{draws_matrix}} with
one column per variable. These are \emph{not} actually draws, just point estimates
stored in the \code{draws_matrix} format.
}
}

\examples{
\dontrun{
stan_program <- tempfile(fileext=".stan")
cat("
parameters {
  real<lower=0> alpha;
  vector[6] beta;
}
model {
 alpha ~ exponential(1);
 beta ~ std_normal();
}
", file = stan_program)

# only using capture.output to avoid too much printed output in example
out <- utils::capture.output(
  mod <- cmdstan_model(stan_program),
  fit <- mod$sample(save_warmup=TRUE)
)

# returned as 3-D array (see ?posterior::draws_array)
draws <- fit$draws()
dim(draws)
str(draws)

# can easily convert to other formats that have chains combined,
# e.g. matrix, data frame, list
library("posterior")
draws <- fit$draws()
as_draws_matrix(draws)
as_draws_df(draws)
as_draws_list(draws)

# can select specific parameters
fit$draws("alpha")
fit$draws("beta")  # selects entire vector beta
fit$draws(c("alpha", "beta[2]"))
}

}
